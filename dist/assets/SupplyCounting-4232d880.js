import{_ as C,d as y,o as c,c as i,b as e,e as x,f as a,F as h,g as q,w as d,v as p,t as o,r as _}from"./index-77eb4d14.js";const M={name:"SupplyCounting",data(){return{product:{name:"",price:null,quantity:null},products:this.$util.storage("products")||[],expense:{name:"",price:null},expenses:this.$util.storage("expenses")||[]}},computed:{sum_price_products(){return this.products.reduce((t,l)=>t+l.price*l.quantity,0)},sum_price_expenses(){return this.expenses.reduce((t,l)=>t+l.price,0)}},methods:{saveData(){this.$util.storage("products",this.products),this.$util.storage("expenses",this.expenses)},addProduct(t){this.products.push(t),this.saveData(),this.product={name:"",price:null,quantity:null}},removeProduct(t){this.products.splice(t,1),this.saveData()},addExpense(t){this.expenses.push(t),this.saveData(),this.expense={name:"",price:null}},removeExpense(t){this.expenses.splice(t,1),this.saveData()},countPrice(){this.products.forEach((t,l)=>{const m=t.price*t.quantity*100/this.sum_price_products,n=this.sum_price_expenses/100*m;t.expense_for_product=n/t.quantity,l==this.products.length-1&&this.$refs.productsModal.openModal()})}}},k=e("h1",null,"Ta'minot tan narxi hisoblash",-1),w={class:"row gap-3"},S={class:"col-md-12"},D={class:"row"},P={class:"col-5"},V=["currency"],E={class:"col-2"},U=e("div",{class:"col-2"},[e("button",{class:"w-100"},"qo'shish")],-1),N={class:"col-12"},T={class:"row"},B={class:"col-md-4"},F={class:"col-12"},J={class:"table-responsive",style:{"max-height":"70vh"}},$=e("thead",null,[e("tr",null,[e("th",null,"Mahsulot"),e("th",null,"Narx"),e("th",null,"Miqdor"),e("th",null,"Summa"),e("th")])],-1),z=["onClick"],H={class:"row gap-3"},L={class:"col-md-12"},j={class:"row"},A={class:"col-5"},G=["currency"],I=e("div",{class:"col-2"},[e("button",{class:"w-100"},"qo'shish")],-1),K={class:"col-12"},O={class:"row"},Q={class:"col-md-4"},R={class:"col-12"},W={class:"table-responsive",style:{"max-height":"70vh"}},X=e("thead",null,[e("tr",null,[e("th",null,"Chiqim"),e("th",null,"Summa"),e("th")])],-1),Y=["onClick"],Z=e("h4",null,"Mahsulotlarga qo'yilgan chiqim narxi",-1),ee=e("thead",null,[e("tr",null,[e("th",null,"Mahsulot"),e("th",null,"Narx"),e("th",null,"Chiqim uchun ustama"),e("th",null,"Miqdor"),e("th",null,"Summa"),e("th")])],-1),se=["onClick"];function te(t,l,b,m,n,u){const f=y("Tab"),g=y("Modal");return c(),i(h,null,[k,e("button",{onClick:l[0]||(l[0]=s=>u.countPrice())},"Hisoblash"),x(f,{tabs:["Mahsulotlar","Chiqimlar"]},{1:a(()=>[e("div",w,[e("div",S,[e("form",{onSubmit:l[4]||(l[4]=q(s=>u.addProduct(n.product),["prevent"]))},[e("div",D,[e("div",P,[d(e("input",{type:"text",class:"form-control",placeholder:"mahsulot",required:"","onUpdate:modelValue":l[1]||(l[1]=s=>n.product.name=s)},null,512),[[p,n.product.name]])]),e("div",{class:"col-3",currency:t.$util.currency(n.product.price)},[d(e("input",{type:"number",min:"0",step:"any",class:"form-control",placeholder:"narx",required:"","onUpdate:modelValue":l[2]||(l[2]=s=>n.product.price=s)},null,512),[[p,n.product.price]])],8,V),e("div",E,[d(e("input",{type:"number",min:"0",step:"any",class:"form-control",placeholder:"miqdor",required:"","onUpdate:modelValue":l[3]||(l[3]=s=>n.product.quantity=s)},null,512),[[p,n.product.quantity]])]),U])],32)]),e("div",N,[e("div",T,[e("div",B,[e("h4",null,o(`Jami summa: ${t.$util.currency(u.sum_price_products)} so'm`),1)])])]),e("div",F,[e("div",J,[e("table",null,[$,e("tbody",null,[(c(!0),i(h,null,_(n.products,(s,r)=>(c(),i("tr",{key:r},[e("td",null,o(s.name),1),e("td",null,o(t.$util.currency(s.price)),1),e("td",null,o(s.quantity),1),e("td",null,o(t.$util.currency(s.price*s.quantity)),1),e("td",null,[e("button",{onClick:v=>u.removeProduct(r)},"x",8,z)])]))),128))])])])])])]),2:a(()=>[e("div",H,[e("div",L,[e("form",{onSubmit:l[7]||(l[7]=q(s=>u.addExpense(n.expense),["prevent"]))},[e("div",j,[e("div",A,[d(e("input",{type:"text",class:"form-control",placeholder:"chiqim",required:"","onUpdate:modelValue":l[5]||(l[5]=s=>n.expense.name=s)},null,512),[[p,n.expense.name]])]),e("div",{class:"col-5",currency:t.$util.currency(n.expense.price)},[d(e("input",{type:"number",min:"0",step:"any",class:"form-control",placeholder:"summa",required:"","onUpdate:modelValue":l[6]||(l[6]=s=>n.expense.price=s)},null,512),[[p,n.expense.price]])],8,G),I])],32)]),e("div",K,[e("div",O,[e("div",Q,[e("h4",null,o(`Jami summa: ${t.$util.currency(u.sum_price_expenses)} so'm`),1)])])]),e("div",R,[e("div",W,[e("table",null,[X,e("tbody",null,[(c(!0),i(h,null,_(n.expenses,(s,r)=>(c(),i("tr",{key:r},[e("td",null,o(s.name),1),e("td",null,o(t.$util.currency(s.price)),1),e("td",null,[e("button",{onClick:v=>u.removeExpense(r)},"x",8,Y)])]))),128))])])])])])]),_:1}),x(g,{ref:"productsModal",size:"lg"},{header:a(()=>[Z]),body:a(()=>[e("table",null,[ee,e("tbody",null,[(c(!0),i(h,null,_(n.products,(s,r)=>(c(),i("tr",{key:r},[e("td",null,o(s.name),1),e("td",null,o(t.$util.currency(s.price)),1),e("td",null,o(t.$util.currency(s.expense_for_product)),1),e("td",null,o(s.quantity),1),e("td",null,o(t.$util.currency((s.price+s.expense_for_product)*s.quantity)),1),e("td",null,[e("button",{onClick:v=>u.removeProduct(r)},"x",8,se)])]))),128))])])]),_:1},512)],64)}const ne=C(M,[["render",te]]);export{ne as default};
